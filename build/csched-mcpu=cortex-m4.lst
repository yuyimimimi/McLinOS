ARM GAS  /tmp/ccdndiqW.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"csched-mcpu=cortex-m4.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c"
  20              		.section	.text.__init_Taskcontext,"ax",%progbits
  21              		.align	1
  22              		.global	__init_Taskcontext
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	__init_Taskcontext:
  28              	.LVL0:
  29              	.LFB226:
   1:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #include <linux/kernel.h>
   2:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #include <linux/compiler.h>
   3:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #include <linux/types.h>
   4:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #include <linux/sched.h>
   5:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
   6:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
   7:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** extern void __default_Task_return_function(void);
   8:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
   9:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** void __init_Taskcontext(struct task_struct* task_data,uint32_t pic_offset){
  30              		.loc 1 9 75 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  10:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     if(task_data == NULL) return;
  35              		.loc 1 10 5 view .LVU1
  36              		.loc 1 10 7 is_stmt 0 view .LVU2
  37 0000 8446     		mov	ip, r0
  38 0002 F0B1     		cbz	r0, .L1
  11:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     TaskContext* context = (TaskContext*)(&task_data->context);
  39              		.loc 1 11 5 is_stmt 1 view .LVU3
  40              	.LVL1:
  12:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t* psp = (uint32_t*)(((uint32_t)task_data->stack_Top) & ~0x7) - 16;
  41              		.loc 1 12 5 view .LVU4
  42              		.loc 1 12 53 is_stmt 0 view .LVU5
  43 0004 436D     		ldr	r3, [r0, #84]
  44              		.loc 1 12 74 view .LVU6
  45 0006 23F00703 		bic	r3, r3, #7
  46 000a 403B     		subs	r3, r3, #64
ARM GAS  /tmp/ccdndiqW.s 			page 2


  47              	.LVL2:
  13:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[15] = 0x01000000u;                  // xPSR
  48              		.loc 1 13 5 is_stmt 1 view .LVU7
  49              		.loc 1 13 13 is_stmt 0 view .LVU8
  50 000c 4FF08072 		mov	r2, #16777216
  51 0010 DA63     		str	r2, [r3, #60]
  14:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[14] = task_data->entry;             // PC (任务入口地址)
  52              		.loc 1 14 5 is_stmt 1 view .LVU9
  53              		.loc 1 14 24 is_stmt 0 view .LVU10
  54 0012 826D     		ldr	r2, [r0, #88]
  55              		.loc 1 14 13 view .LVU11
  56 0014 9A63     		str	r2, [r3, #56]
  15:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[13] = __default_Task_return_function;  // LR (返回地址)
  57              		.loc 1 15 5 is_stmt 1 view .LVU12
  58              		.loc 1 15 13 is_stmt 0 view .LVU13
  59 0016 0B4A     		ldr	r2, .L3
  60 0018 5A63     		str	r2, [r3, #52]
  16:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[12] = 0;                            // r12
  61              		.loc 1 16 5 is_stmt 1 view .LVU14
  62              		.loc 1 16 13 is_stmt 0 view .LVU15
  63 001a 0022     		movs	r2, #0
  64 001c 1A63     		str	r2, [r3, #48]
  17:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[11] = 0;                            // r3
  65              		.loc 1 17 5 is_stmt 1 view .LVU16
  66              		.loc 1 17 13 is_stmt 0 view .LVU17
  67 001e DA62     		str	r2, [r3, #44]
  18:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[10] = 0;                            // r2
  68              		.loc 1 18 5 is_stmt 1 view .LVU18
  69              		.loc 1 18 13 is_stmt 0 view .LVU19
  70 0020 9A62     		str	r2, [r3, #40]
  19:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[9] = 0xFFFFFFFD;                    // r1     
  71              		.loc 1 19 5 is_stmt 1 view .LVU20
  72              		.loc 1 19 12 is_stmt 0 view .LVU21
  73 0022 6FF00200 		mvn	r0, #2
  74              	.LVL3:
  75              		.loc 1 19 12 view .LVU22
  76 0026 5862     		str	r0, [r3, #36]
  20:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[8] = task_data->arg;                // r0
  77              		.loc 1 20 5 is_stmt 1 view .LVU23
  78              		.loc 1 20 23 is_stmt 0 view .LVU24
  79 0028 DCF85C00 		ldr	r0, [ip, #92]
  80              		.loc 1 20 12 view .LVU25
  81 002c 1862     		str	r0, [r3, #32]
  21:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[7] = 0;                     // r11
  82              		.loc 1 21 5 is_stmt 1 view .LVU26
  83              		.loc 1 21 12 is_stmt 0 view .LVU27
  84 002e DA61     		str	r2, [r3, #28]
  22:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[6] = 0;                     // r10
  85              		.loc 1 22 5 is_stmt 1 view .LVU28
  86              		.loc 1 22 12 is_stmt 0 view .LVU29
  87 0030 9A61     		str	r2, [r3, #24]
  23:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[5] = pic_offset;            // r9
  88              		.loc 1 23 5 is_stmt 1 view .LVU30
  89              		.loc 1 23 12 is_stmt 0 view .LVU31
  90 0032 5961     		str	r1, [r3, #20]
  24:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[4] = 0;                     // r8
  91              		.loc 1 24 5 is_stmt 1 view .LVU32
ARM GAS  /tmp/ccdndiqW.s 			page 3


  92              		.loc 1 24 12 is_stmt 0 view .LVU33
  93 0034 1A61     		str	r2, [r3, #16]
  25:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[3] = 0;                     // r7
  94              		.loc 1 25 5 is_stmt 1 view .LVU34
  95              		.loc 1 25 12 is_stmt 0 view .LVU35
  96 0036 DA60     		str	r2, [r3, #12]
  26:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[2] = 0;                     // r6
  97              		.loc 1 26 5 is_stmt 1 view .LVU36
  98              		.loc 1 26 12 is_stmt 0 view .LVU37
  99 0038 9A60     		str	r2, [r3, #8]
  27:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[1] = 0;                     // r5
 100              		.loc 1 27 5 is_stmt 1 view .LVU38
 101              		.loc 1 27 12 is_stmt 0 view .LVU39
 102 003a 5A60     		str	r2, [r3, #4]
  28:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     psp[0] = (uint32_t)(psp);       // r4
 103              		.loc 1 28 5 is_stmt 1 view .LVU40
 104              		.loc 1 28 12 is_stmt 0 view .LVU41
 105 003c 1B60     		str	r3, [r3]
  29:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     context->psp = (uint32_t)(psp);
 106              		.loc 1 29 5 is_stmt 1 view .LVU42
 107              		.loc 1 29 18 is_stmt 0 view .LVU43
 108 003e CCF84C30 		str	r3, [ip, #76]
 109              	.LVL4:
 110              	.L1:
  30:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** } 
 111              		.loc 1 30 1 view .LVU44
 112 0042 7047     		bx	lr
 113              	.L4:
 114              		.align	2
 115              	.L3:
 116 0044 00000000 		.word	__default_Task_return_function
 117              		.cfi_endproc
 118              	.LFE226:
 120              		.section	.text.__get_task_using_cpu_core,"ax",%progbits
 121              		.align	1
 122              		.global	__get_task_using_cpu_core
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 127              	__get_task_using_cpu_core:
 128              	.LFB227:
  31:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  32:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** int __get_task_using_cpu_core(void){
 129              		.loc 1 32 36 is_stmt 1 view -0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 0
 132              		@ frame_needed = 0, uses_anonymous_args = 0
 133              		@ link register save eliminated.
  33:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     return 0;
 134              		.loc 1 33 5 view .LVU46
  34:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** }
 135              		.loc 1 34 1 is_stmt 0 view .LVU47
 136 0000 0020     		movs	r0, #0
 137 0002 7047     		bx	lr
 138              		.cfi_endproc
 139              	.LFE227:
 141              		.section	.text.UsageFault_Handler,"ax",%progbits
ARM GAS  /tmp/ccdndiqW.s 			page 4


 142              		.align	1
 143              		.global	UsageFault_Handler
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 148              	UsageFault_Handler:
 149              	.LFB228:
  35:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  36:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  37:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** extern void __user_error_process(void);
  38:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** void UsageFault_Handler(){
 150              		.loc 1 38 26 is_stmt 1 view -0
 151              		.cfi_startproc
 152              		@ args = 0, pretend = 0, frame = 0
 153              		@ frame_needed = 0, uses_anonymous_args = 0
 154 0000 08B5     		push	{r3, lr}
 155              	.LCFI0:
 156              		.cfi_def_cfa_offset 8
 157              		.cfi_offset 3, -8
 158              		.cfi_offset 14, -4
  39:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     __user_error_process();
 159              		.loc 1 39 5 view .LVU49
 160 0002 FFF7FEFF 		bl	__user_error_process
 161              	.LVL5:
  40:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** }
 162              		.loc 1 40 1 is_stmt 0 view .LVU50
 163 0006 08BD     		pop	{r3, pc}
 164              		.cfi_endproc
 165              	.LFE228:
 167              		.section	.text.get_register_dump,"ax",%progbits
 168              		.align	1
 169              		.global	get_register_dump
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	get_register_dump:
 175              	.LVL6:
 176              	.LFB229:
  41:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  42:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  43:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  44:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** // 修正后的宏定义（显式声明输出变量）
  45:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #define __get_MSP()       ({ register uint32_t result; __asm volatile ("MRS %0, msp" : "=r" (result
  46:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #define __get_PSP()       ({ register uint32_t result; __asm volatile ("MRS %0, psp" : "=r" (result
  47:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #define __get_LR()        ({ register uint32_t result; __asm volatile ("MOV %0, lr"  : "=r" (result
  48:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #define __get_PC()        ({ register uint32_t result; __asm volatile ("MOV %0, pc"  : "=r" (result
  49:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** #define __get_CONTROL()   ({ register uint32_t result; __asm volatile ("MRS %0, control" : "=r" (re
  50:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  51:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  52:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** typedef struct {
  53:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t r0;
  54:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t r1;
  55:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t r2;
  56:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t r3;
  57:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t r12;
  58:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t lr;    // Link Register (LR)
  59:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t pc;    // Program Counter (PC)
ARM GAS  /tmp/ccdndiqW.s 			page 5


  60:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t psr;   // Program Status Register (PSR)
  61:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t msp;   // Main Stack Pointer (MSP)
  62:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     uint32_t psp;   // Process Stack Pointer (PSP)
  63:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** } RegisterDump;
  64:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  65:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** void get_register_dump(RegisterDump *dump, uint32_t *stack_frame) {
 177              		.loc 1 65 67 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
  66:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->r0  = stack_frame[0];
 182              		.loc 1 66 5 view .LVU52
 183              		.loc 1 66 28 is_stmt 0 view .LVU53
 184 0000 0B68     		ldr	r3, [r1]
 185              		.loc 1 66 15 view .LVU54
 186 0002 0360     		str	r3, [r0]
  67:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->r1  = stack_frame[1];
 187              		.loc 1 67 5 is_stmt 1 view .LVU55
 188              		.loc 1 67 15 is_stmt 0 view .LVU56
 189 0004 4B68     		ldr	r3, [r1, #4]
 190 0006 4360     		str	r3, [r0, #4]
  68:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->r2  = stack_frame[2];
 191              		.loc 1 68 5 is_stmt 1 view .LVU57
 192              		.loc 1 68 15 is_stmt 0 view .LVU58
 193 0008 8B68     		ldr	r3, [r1, #8]
 194 000a 8360     		str	r3, [r0, #8]
  69:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->r3  = stack_frame[3];
 195              		.loc 1 69 5 is_stmt 1 view .LVU59
 196              		.loc 1 69 15 is_stmt 0 view .LVU60
 197 000c CB68     		ldr	r3, [r1, #12]
 198 000e C360     		str	r3, [r0, #12]
  70:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->r12 = stack_frame[4];
 199              		.loc 1 70 5 is_stmt 1 view .LVU61
 200              		.loc 1 70 15 is_stmt 0 view .LVU62
 201 0010 0B69     		ldr	r3, [r1, #16]
 202 0012 0361     		str	r3, [r0, #16]
  71:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->lr  = stack_frame[5];
 203              		.loc 1 71 5 is_stmt 1 view .LVU63
 204              		.loc 1 71 15 is_stmt 0 view .LVU64
 205 0014 4B69     		ldr	r3, [r1, #20]
 206 0016 4361     		str	r3, [r0, #20]
  72:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->pc  = stack_frame[6];
 207              		.loc 1 72 5 is_stmt 1 view .LVU65
 208              		.loc 1 72 15 is_stmt 0 view .LVU66
 209 0018 8B69     		ldr	r3, [r1, #24]
 210 001a 8361     		str	r3, [r0, #24]
  73:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->psr = stack_frame[7];
 211              		.loc 1 73 5 is_stmt 1 view .LVU67
 212              		.loc 1 73 15 is_stmt 0 view .LVU68
 213 001c CB69     		ldr	r3, [r1, #28]
 214 001e C361     		str	r3, [r0, #28]
  74:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->msp = __get_MSP();
 215              		.loc 1 74 5 is_stmt 1 view .LVU69
 216              	.LBB2:
 217              		.loc 1 74 17 view .LVU70
 218              		.loc 1 74 17 view .LVU71
ARM GAS  /tmp/ccdndiqW.s 			page 6


 219              		.syntax unified
 220              	@ 74 "/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c" 1
 221 0020 EFF30883 		MRS r3, msp
 222              	@ 0 "" 2
 223              	.LVL7:
 224              		.loc 1 74 17 view .LVU72
 225              		.thumb
 226              		.syntax unified
 227              	.LBE2:
 228              		.loc 1 74 15 is_stmt 0 view .LVU73
 229 0024 0362     		str	r3, [r0, #32]
  75:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     dump->psp = __get_PSP();
 230              		.loc 1 75 5 is_stmt 1 view .LVU74
 231              	.LBB3:
 232              		.loc 1 75 17 view .LVU75
 233              		.loc 1 75 17 view .LVU76
 234              		.syntax unified
 235              	@ 75 "/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c" 1
 236 0026 EFF30983 		MRS r3, psp
 237              	@ 0 "" 2
 238              	.LVL8:
 239              		.loc 1 75 17 view .LVU77
 240              		.thumb
 241              		.syntax unified
 242              	.LBE3:
 243              		.loc 1 75 15 is_stmt 0 view .LVU78
 244 002a 4362     		str	r3, [r0, #36]
  76:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** }
 245              		.loc 1 76 1 view .LVU79
 246 002c 7047     		bx	lr
 247              		.cfi_endproc
 248              	.LFE229:
 250              		.section	.rodata.__hard_fault_handler_c.str1.4,"aMS",%progbits,1
 251              		.align	2
 252              	.LC0:
 253 0000 0A486172 		.ascii	"\012HardFault Registers:\012\000"
 253      64466175 
 253      6C742052 
 253      65676973 
 253      74657273 
 254 0017 00       		.align	2
 255              	.LC1:
 256 0018 52303A20 		.ascii	"R0:  0x%08x, R1:  0x%08x, R2:  0x%08x\012\000"
 256      20307825 
 256      3038782C 
 256      2052313A 
 256      20203078 
 257 003f 00       		.align	2
 258              	.LC2:
 259 0040 52333A20 		.ascii	"R3:  0x%08x, R12: 0x%08x, LR:  0x%08x\012\000"
 259      20307825 
 259      3038782C 
 259      20523132 
 259      3A203078 
 260 0067 00       		.align	2
 261              	.LC3:
 262 0068 50433A20 		.ascii	"PC:  0x%08x, PSR: 0x%08x\012\000"
ARM GAS  /tmp/ccdndiqW.s 			page 7


 262      20307825 
 262      3038782C 
 262      20505352 
 262      3A203078 
 263 0082 0000     		.align	2
 264              	.LC4:
 265 0084 4D53503A 		.ascii	"MSP: 0x%08x, PSP: 0x%08x\012\000"
 265      20307825 
 265      3038782C 
 265      20505350 
 265      3A203078 
 266              		.section	.text.__hard_fault_handler_c,"ax",%progbits
 267              		.align	1
 268              		.global	__hard_fault_handler_c
 269              		.syntax unified
 270              		.thumb
 271              		.thumb_func
 273              	__hard_fault_handler_c:
 274              	.LVL9:
 275              	.LFB230:
  77:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  78:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** extern void __kernel_error_process(void);
  79:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****   
  80:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** void __hard_fault_handler_c(uint32_t *stack_frame) {
 276              		.loc 1 80 52 is_stmt 1 view -0
 277              		.cfi_startproc
 278              		@ args = 0, pretend = 0, frame = 40
 279              		@ frame_needed = 0, uses_anonymous_args = 0
 280              		.loc 1 80 52 is_stmt 0 view .LVU81
 281 0000 00B5     		push	{lr}
 282              	.LCFI1:
 283              		.cfi_def_cfa_offset 4
 284              		.cfi_offset 14, -4
 285 0002 8DB0     		sub	sp, sp, #52
 286              	.LCFI2:
 287              		.cfi_def_cfa_offset 56
 288 0004 0146     		mov	r1, r0
  81:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     RegisterDump regs;
 289              		.loc 1 81 5 is_stmt 1 view .LVU82
  82:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     get_register_dump(&regs, stack_frame);
 290              		.loc 1 82 5 view .LVU83
 291 0006 02A8     		add	r0, sp, #8
 292              	.LVL10:
 293              		.loc 1 82 5 is_stmt 0 view .LVU84
 294 0008 FFF7FEFF 		bl	get_register_dump
 295              	.LVL11:
  83:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     pr_err("\nHardFault Registers:\n");
 296              		.loc 1 83 5 is_stmt 1 view .LVU85
 297 000c 1249     		ldr	r1, .L11
 298 000e 0320     		movs	r0, #3
 299 0010 FFF7FEFF 		bl	printk
 300              	.LVL12:
  84:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     pr_err("R0:  0x%08x, R1:  0x%08x, R2:  0x%08x\n", regs.r0, regs.r1, regs.r2);
 301              		.loc 1 84 5 view .LVU86
 302 0014 049B     		ldr	r3, [sp, #16]
 303 0016 0093     		str	r3, [sp]
 304 0018 039B     		ldr	r3, [sp, #12]
ARM GAS  /tmp/ccdndiqW.s 			page 8


 305 001a 029A     		ldr	r2, [sp, #8]
 306 001c 0F49     		ldr	r1, .L11+4
 307 001e 0320     		movs	r0, #3
 308 0020 FFF7FEFF 		bl	printk
 309              	.LVL13:
  85:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     pr_err("R3:  0x%08x, R12: 0x%08x, LR:  0x%08x\n", regs.r3, regs.r12, regs.lr);
 310              		.loc 1 85 5 view .LVU87
 311 0024 079B     		ldr	r3, [sp, #28]
 312 0026 0093     		str	r3, [sp]
 313 0028 069B     		ldr	r3, [sp, #24]
 314 002a 059A     		ldr	r2, [sp, #20]
 315 002c 0C49     		ldr	r1, .L11+8
 316 002e 0320     		movs	r0, #3
 317 0030 FFF7FEFF 		bl	printk
 318              	.LVL14:
  86:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     pr_err("PC:  0x%08x, PSR: 0x%08x\n", regs.pc, regs.psr);
 319              		.loc 1 86 5 view .LVU88
 320 0034 099B     		ldr	r3, [sp, #36]
 321 0036 089A     		ldr	r2, [sp, #32]
 322 0038 0A49     		ldr	r1, .L11+12
 323 003a 0320     		movs	r0, #3
 324 003c FFF7FEFF 		bl	printk
 325              	.LVL15:
  87:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     pr_err("MSP: 0x%08x, PSP: 0x%08x\n", regs.msp, regs.psp);
 326              		.loc 1 87 5 view .LVU89
 327 0040 0B9B     		ldr	r3, [sp, #44]
 328 0042 0A9A     		ldr	r2, [sp, #40]
 329 0044 0849     		ldr	r1, .L11+16
 330 0046 0320     		movs	r0, #3
 331 0048 FFF7FEFF 		bl	printk
 332              	.LVL16:
  88:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     __kernel_error_process();
 333              		.loc 1 88 5 view .LVU90
 334 004c FFF7FEFF 		bl	__kernel_error_process
 335              	.LVL17:
  89:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** }
 336              		.loc 1 89 1 is_stmt 0 view .LVU91
 337 0050 0DB0     		add	sp, sp, #52
 338              	.LCFI3:
 339              		.cfi_def_cfa_offset 4
 340              		@ sp needed
 341 0052 5DF804FB 		ldr	pc, [sp], #4
 342              	.L12:
 343 0056 00BF     		.align	2
 344              	.L11:
 345 0058 00000000 		.word	.LC0
 346 005c 18000000 		.word	.LC1
 347 0060 40000000 		.word	.LC2
 348 0064 68000000 		.word	.LC3
 349 0068 84000000 		.word	.LC4
 350              		.cfi_endproc
 351              	.LFE230:
 353              		.section	.text.HardFault_Handler,"ax",%progbits
 354              		.align	1
 355              		.global	HardFault_Handler
 356              		.syntax unified
 357              		.thumb
ARM GAS  /tmp/ccdndiqW.s 			page 9


 358              		.thumb_func
 360              	HardFault_Handler:
 361              	.LFB231:
  90:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** 
  91:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** void __attribute__((naked)) HardFault_Handler() 
  92:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** {
 362              		.loc 1 92 1 is_stmt 1 view -0
 363              		.cfi_startproc
 364              		@ Naked Function: prologue and epilogue provided by programmer.
 365              		@ args = 0, pretend = 0, frame = 0
 366              		@ frame_needed = 0, uses_anonymous_args = 0
  93:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     __asm__ volatile (
 367              		.loc 1 93 5 view .LVU93
 368              		.syntax unified
 369              	@ 93 "/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c" 1
 370 0000 1EF0040F 		TST LR, #4            
 371 0004 0CBF     	ITE EQ                 
 372 0006 EFF30880 	MRSEQ R0, MSP          
 373 000a EFF30980 	MRSNE R0, PSP          
 374 000e FFF7FEBF 	B __hard_fault_handler_c 
 375              	
 376              	@ 0 "" 2
  94:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****         "TST LR, #4            \n"  // 检查 LR 的 EXC_RETURN 位2（判断使用 MSP/PSP）
  95:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****         "ITE EQ                 \n"
  96:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****         "MRSEQ R0, MSP          \n"  // 如果 LR & 4 == 0，使用 MSP
  97:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****         "MRSNE R0, PSP          \n"  // 否则使用 PSP
  98:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****         "B __hard_fault_handler_c \n" // 跳转到 C 函数
  99:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c ****     );
 100:/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/kernel/sched/csched-mcpu=cortex-m4.c **** }...
 377              		.loc 1 100 1 is_stmt 0 view .LVU94
 378              		.thumb
 379              		.syntax unified
 380              		.cfi_endproc
 381              	.LFE231:
 383              		.text
 384              	.Letext0:
 385              		.file 2 "/mnt/c/Users/31740/Desktop/newcore/include/asm-generic/int-l64.h"
 386              		.file 3 "/mnt/c/Users/31740/Desktop/newcore/include/asm-generic/posix_types.h"
 387              		.file 4 "/mnt/c/Users/31740/Desktop/newcore/include/linux/types.h"
 388              		.file 5 "/mnt/c/Users/31740/Desktop/newcore/include/linux/time64.h"
 389              		.file 6 "/mnt/c/Users/31740/Desktop/newcore/arch/arm_m/include/asm/sched.h"
 390              		.file 7 "/mnt/c/Users/31740/Desktop/newcore/include/linux/sched.h"
 391              		.file 8 "/mnt/c/Users/31740/Desktop/newcore/include/linux/printk.h"
ARM GAS  /tmp/ccdndiqW.s 			page 10


DEFINED SYMBOLS
                            *ABS*:00000000 csched-mcpu=cortex-m4.c
     /tmp/ccdndiqW.s:21     .text.__init_Taskcontext:00000000 $t
     /tmp/ccdndiqW.s:27     .text.__init_Taskcontext:00000000 __init_Taskcontext
     /tmp/ccdndiqW.s:116    .text.__init_Taskcontext:00000044 $d
     /tmp/ccdndiqW.s:121    .text.__get_task_using_cpu_core:00000000 $t
     /tmp/ccdndiqW.s:127    .text.__get_task_using_cpu_core:00000000 __get_task_using_cpu_core
     /tmp/ccdndiqW.s:142    .text.UsageFault_Handler:00000000 $t
     /tmp/ccdndiqW.s:148    .text.UsageFault_Handler:00000000 UsageFault_Handler
     /tmp/ccdndiqW.s:168    .text.get_register_dump:00000000 $t
     /tmp/ccdndiqW.s:174    .text.get_register_dump:00000000 get_register_dump
     /tmp/ccdndiqW.s:251    .rodata.__hard_fault_handler_c.str1.4:00000000 $d
     /tmp/ccdndiqW.s:267    .text.__hard_fault_handler_c:00000000 $t
     /tmp/ccdndiqW.s:273    .text.__hard_fault_handler_c:00000000 __hard_fault_handler_c
     /tmp/ccdndiqW.s:345    .text.__hard_fault_handler_c:00000058 $d
     /tmp/ccdndiqW.s:354    .text.HardFault_Handler:00000000 $t
     /tmp/ccdndiqW.s:360    .text.HardFault_Handler:00000000 HardFault_Handler

UNDEFINED SYMBOLS
__default_Task_return_function
__user_error_process
printk
__kernel_error_process
