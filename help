注意:
内核空间不支持libc。所以你不能使用裸机库而是应该使用寄存器进行驱动编写
本项目有自己的管理方式,请不要尝试将它放入mdk等集成开发环境中
此外它采用独立的工具链，不要尝试将它嵌入任何项目中
你可以修改/user/rootfs/下的文件,这个文件夹会被直接映射为系统根目录.
你可以使用make rootfs更新信息


使用第一步:
    指令:make installtools 用于自动配置编译环境
    之后你需要下载自己对应平台的gcc编译器

使用内核已经提供适配平台:
    在makefile中配置这几项,分别指定架构,设备型号，编译器 。比如:
        STRUCT   = arm_m
        PLATFORM = stm32f4
        PREFIX   = arm-none-eabi-
    
    随后使用make menuconfig指令进行配置。
    完成后会自动按照平台生成对应的启动脚本，中断向量表，链接器脚本等。
    当然你可以在/config 文件夹下找到已适配的文件的.config 直接复制就行

    然后使用make dtbs 
    此时会生成并编译设备树

    进入/arch/$(STRUCT)/much.... 
    文件夹下找到你的设备对应型号,使用make质量编译bootloader。烧录它

    使用make rootfs指令编译根文件系统

    最后使用make 指令编译得到最终可执行文件,直接烧录它的hex文件(如果是bin文件需要手动设置地址,防止覆盖bootloader)


对未适配平台的最小化移植:
    
    需要实现的:
    首先,你需要实现一个bootloader。bootloader没有固定格式要求。
    你可以从/generated/autoconf.h中通过CONFIG_LD_FLASH_START_ADDRESS获取内核的启动地址
    如果你有外置内存最好在bootloader中初始化,bootloader也要负责初始化设备时钟等
    并需要使用第一个寄存器传递put_char函数用于最小化启动的日志输出

    脚本部分:
    1../arch/$(STRUCT)/config/Kconfig.$(PLATFORM) 
    这里是对应平台的kconfig。
    至少需要写入 
        source "$(STRUCT)/arm_m/kconfig"
        如果你的平台有特殊配置项则需要你手动添加

    2./arch/$(STRUCT)/config/makefile.$(PLATFORM) 
    配置架构的模式,请参考其它makefile
    此处还是比较简单的

    4.arch/$(STRUCT)/boot/dts/$(PLATFORM).dtsi
    此处用于编写设备树文件，你可以参考已经适配平台的设备树
    如果你是最小化启动,可以不添加硬件，随便填充内容只要能通过编译就行


    5.使用make menuconfig配置使用
     Linker Script Config  ---> 它用于配置内核布局。你只需要配置ram和flash。如果你的设备的内存结构复杂,请忽略其它内存。
     Boot Configuration  --->   你需要使用它配置外设中断数量。它会用于自动生成中断向量表
     Kernel Memory Pool  --->   使用它，配置内核内存池大小。如果你有其它特殊内存，你可以使用拓展位添加。而不是在链接器脚本中配置

    6.如果CPU不被支持,需要这样进行移植:
        arch/$(STRUCT)/kernel/sched/csched$(CPU).sched
        重新实现这个汇编程序

    7.唯一驱动:
        实现/drivers/tick/$(PLATFORM)_tick.c
        开启SysTick中断


    此时已经可以以最小模式运行.
    虚拟文件系统完成初始化,并完成了

    8.main_tty_dev_init()
    该函数自动调用,不得使用module_init修饰
    它用于实现第一个tty字符设备
    它是最早的字符设备驱动,用于重定向printk.
    在它执行完成后就会直接调用printk_init。
    你需要让 printk_init能找到/dev/tty*结点,你可以在menuconfig中配置它使用的tty设备
    如果你没有实现它,printk会继续调用put_char提供的接口进行输出(所以也可以不写)

平台切换:
    依旧是在makefile中修改
        STRUCT  = 
        PLATFORM = 
        PREFIX  = 
    这三项。替换掉.config文件(最好备份你的旧配置文件)
    如果你没有可替换的配置文件则需要手动配置。
    如果你有配置文件,则只要使用make menuconfig,然后什么也不做直接退出从而直接按照旧配置生成代码。
    执行make clean 清除上一个平台的残余文件
    执行make dtbs编译设备树
    make rootfs编译根目录
    执行make 编译出固件

架构移植:
    理论上你可以直接复制某一个架构在arch下的文件夹,然后替换掉其中的所有汇编部分。
    当然,实际上肯定不止这些.这里不提供这么多复制


